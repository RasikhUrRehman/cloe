<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleo - AI Job Application Assistant</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Landing Page -->
    <div id="landingPage" class="landing-page">
        <div class="landing-container">
            <div class="landing-content">
                <h1 class="landing-title">Welcome to Cleo</h1>
                <p class="landing-subtitle">Your AI-powered Job Application Assistant</p>
                <p class="landing-description">
                    Cleo helps you through the entire job application process with personalized guidance,
                    intelligent conversation, and smart document processing.
                </p>
                <div class="landing-features">
                    <div class="feature">
                        <div class="feature-icon">ðŸ’¬</div>
                        <div class="feature-text">Interactive Conversations</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">ðŸ“„</div>
                        <div class="feature-text">Smart Document Analysis</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">âœ¨</div>
                        <div class="feature-text">Personalized Guidance</div>
                    </div>
                </div>
                
                <!-- Job Selection Section -->
                <div class="job-selection-container">
                    <h3 class="job-selection-title">Select a Job Position (Optional)</h3>
                    <div id="jobsLoadingIndicator" class="jobs-loading" style="display: none;">
                        <div class="loading-spinner"></div>
                        <span>Loading available jobs...</span>
                    </div>
                    <div id="jobSelectionDropdown" class="job-dropdown-container" style="display: none;">
                        <select id="jobSelect" class="job-select">
                            <option value="">General Application (No specific job)</option>
                        </select>
                        <button id="refreshJobsButton" class="refresh-jobs-button" title="Refresh Jobs">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                            </svg>
                        </button>
                    </div>
                    <div id="selectedJobInfo" class="selected-job-info" style="display: none;"></div>
                    <div id="jobsError" class="error-message" style="display: none;"></div>
                </div>

                <!-- Document Upload Section -->
                <div class="document-upload-container">
                    <h3 class="upload-section-title">Upload Company/Job Documents (Optional)</h3>
                    <p class="upload-description">Upload PDF documents related to the company or job position to help Cleo provide more accurate assistance.</p>
                    
                    <div class="upload-form-container">
                        <form id="documentUploadForm" class="upload-form" enctype="multipart/form-data">
                            <div class="upload-field-group">
                                <div class="upload-field">
                                    <label for="documentFile" class="upload-label">Select PDF Document</label>
                                    <div class="file-input-wrapper">
                                        <input type="file" id="documentFile" name="file" accept=".pdf" class="file-input" required>
                                        <div class="file-input-display">
                                            <span id="fileDisplayText">Choose PDF file...</span>
                                            <button type="button" class="file-browse-button" id="fileBrowseButton">Browse</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="upload-field">
                                    <label for="companyName" class="upload-label">Company Name (Optional)</label>
                                    <input type="text" id="companyName" name="company_name" class="upload-input" placeholder="Enter company name...">
                                </div>
                                
                                <div class="upload-field">
                                    <label for="documentType" class="upload-label">Document Type</label>
                                    <select id="documentType" name="document_type" class="upload-select" required>
                                        <option value="">Select document type</option>
                                        <option value="company">Company Document</option>
                                        <option value="job">Job Document</option>
                                    </select>
                                </div>
                                
                                <div class="upload-field">
                                    <label for="jobType" class="upload-label">Job Category</label>
                                    <select id="jobType" name="job_type" class="upload-select">
                                        <option value="general">General</option>
                                        <option value="warehouse">Warehouse</option>
                                        <option value="healthcare">Healthcare</option>
                                        <option value="retail">Retail</option>
                                        <option value="food_service">Food Service</option>
                                        <option value="construction">Construction</option>
                                        <option value="office">Office</option>
                                        <option value="customer_service">Customer Service</option>
                                    </select>
                                </div>
                                
                                <div class="upload-field">
                                    <label for="documentSection" class="upload-label">Document Section</label>
                                    <select id="documentSection" name="section" class="upload-select">
                                        <option value="general">General</option>
                                        <option value="company_info">Company Information</option>
                                        <option value="job_requirements">Job Requirements</option>
                                        <option value="benefits">Benefits & Compensation</option>
                                        <option value="policies">Policies & Procedures</option>
                                        <option value="training">Training & Development</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button type="submit" id="uploadButton" class="upload-button">
                                <span class="upload-text">Upload Document</span>
                                <span class="upload-spinner" style="display: none;">
                                    <div class="spinner-small"></div>
                                </span>
                            </button>
                        </form>
                        
                        <div id="uploadProgress" class="upload-progress" style="display: none;">
                            <div class="progress-bar">
                                <div id="progressFill" class="progress-fill"></div>
                            </div>
                            <div id="progressText" class="progress-text">Uploading...</div>
                        </div>
                        
                        <div id="uploadResults" class="upload-results" style="display: none;"></div>
                        <div id="uploadError" class="error-message" style="display: none;"></div>
                    </div>
                    
                    <!-- Uploaded Documents List -->
                    <div class="uploaded-documents-container">
                        <div class="uploaded-documents-header">
                            <h4>Uploaded Documents</h4>
                            <button id="refreshDocumentsButton" class="refresh-button" title="Refresh documents">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                                </svg>
                            </button>
                        </div>
                        <div id="documentsList" class="documents-list">
                            <div class="no-documents">No documents uploaded yet.</div>
                        </div>
                    </div>
                </div>
                
                <button id="startButton" class="start-button">Start Conversation</button>
                <div id="landingError" class="error-message" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Chat Interface -->
    <div id="chatInterface" class="chat-interface" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>Session Status</h2>
                <div class="session-id">
                    <small>Session ID:</small>
                    <div id="sessionIdDisplay" class="session-id-text"></div>
                </div>
            </div>

            <div class="status-container">
                <div class="status-section">
                    <h3>Current Stage</h3>
                    <div id="currentStage" class="stage-badge">Initializing...</div>
                </div>
                
                <!-- Job Information Section -->
                <div class="status-section" id="jobInfoSection" style="display: none;">
                    <h3>Job Position</h3>
                    <div id="jobInfo" class="job-info-display"></div>
                </div>

                <div class="status-section">
                    <h3>Progress</h3>
                    <div class="progress-list">
                        <div class="progress-item" id="engagementProgress">
                            <div class="progress-icon">â—‹</div>
                            <div class="progress-label">Engagement</div>
                        </div>
                        <div class="progress-item" id="qualificationProgress">
                            <div class="progress-icon">â—‹</div>
                            <div class="progress-label">Qualification</div>
                        </div>
                        <div class="progress-item" id="applicationProgress">
                            <div class="progress-icon">â—‹</div>
                            <div class="progress-label">Application</div>
                        </div>
                        <div class="progress-item" id="verificationProgress">
                            <div class="progress-icon">â—‹</div>
                            <div class="progress-label">Verification</div>
                        </div>
                    </div>
                </div>

                <!-- Fit Score Section -->
                <div class="status-section" id="fitScoreSection" style="display: none;">
                    <h3>Fit Score</h3>
                    <div id="fitScoreDisplay" class="fit-score-display">
                        <div class="fit-score-main">
                            <div class="fit-score-total">
                                <span id="fitScoreValue">--</span>
                                <span class="fit-score-max">/100</span>
                            </div>
                            <div id="fitScoreRating" class="fit-score-rating">--</div>
                        </div>
                        <div class="fit-score-breakdown">
                            <div class="score-item">
                                <span class="score-label">Qualification</span>
                                <span id="qualificationScore" class="score-value">--</span>
                            </div>
                            <div class="score-item">
                                <span class="score-label">Experience</span>
                                <span id="experienceScore" class="score-value">--</span>
                            </div>
                            <div class="score-item">
                                <span class="score-label">Verification</span>
                                <span id="verificationScore" class="score-value">--</span>
                            </div>
                        </div>
                        <button id="calculateFitScoreButton" class="action-button primary" style="margin-top: 10px;">
                            Calculate Fit Score
                        </button>
                    </div>
                </div>

                <div class="status-section">
                    <h3>API Status</h3>
                    <div id="apiStatus" class="api-status">
                        <div class="status-indicator"></div>
                        <span>Checking...</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-actions">
                <button id="newSessionButton" class="action-button secondary">New Session</button>
                <button id="resetButton" class="action-button secondary">Reset Chat</button>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area">
            <div class="chat-header">
                <h1>Cleo Assistant</h1>
                <p>AI-powered Job Application Guide</p>
            </div>

            <div id="chatMessages" class="chat-messages">
                <!-- Messages will be appended here -->
            </div>

            <div class="chat-input-container">
                <div id="typingIndicator" class="typing-indicator" style="display: none;">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <form id="chatForm" class="chat-form">
                    <input
                        type="text"
                        id="messageInput"
                        class="message-input"
                        placeholder="Type your message..."
                        autocomplete="off"
                        required
                    />
                    <button type="submit" id="sendButton" class="send-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
